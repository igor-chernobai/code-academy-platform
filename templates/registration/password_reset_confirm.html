{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="flex justify-center py-16 px-4">

  <div class="card w-full max-w-md">

    {% if validlink %}

      <h2 class="text-2xl font-bold text-center text-[var(--color-primary-dark)]">
        Встановлення нового пароля
      </h2>

      <p class="text-gray-600 text-center">
        Будь ласка, введіть новий пароль двічі для підтвердження.
      </p>

      <form method="post" class="space-y-5">
        {% csrf_token %}

        {% if form.non_field_errors %}
          <div class="p-4 text-sm text-red-700 bg-red-100 border border-red-300 rounded-xl">
            {% for error in form.non_field_errors %}
              <p>{{ error }}</p>
            {% endfor %}
          </div>
        {% endif %}

        <div>
          <label for="{{ form.new_password1.id_for_label }}">
            Новий пароль
          </label>
          {{ form.new_password1 }}
          {% if form.new_password1.errors %}
            <p class="mt-1 text-sm text-red-500">
              {{ form.new_password1.errors|striptags }}
            </p>
          {% endif %}
        </div>

        <div>
          <label for="{{ form.new_password2.id_for_label }}">
            Підтвердіть пароль
          </label>
          {{ form.new_password2 }}
          {% if form.new_password2.errors %}
            <p class="mt-1 text-sm text-red-500">
              {{ form.new_password2.errors|striptags }}
            </p>
          {% endif %}
        </div>

        <button type="submit" class="btn btn-primary w-full">
          Змінити пароль
        </button>

      </form>

    {% else %}

      <h2 class="text-2xl font-bold text-center text-red-600">
        Помилка скидання пароля
      </h2>

      <p class="text-gray-600 text-center">
        Посилання недійсне або вже використане.
        Будь ласка, повторно запросіть скидання пароля.
      </p>

      <a href="{% url 'password_reset' %}" class="btn btn-outline w-full">
        Запросити нове скидання
      </a>

    {% endif %}

  </div>

</div>
{% endblock %}