{% extends 'base.html' %}
{% load static %}

{% block content %}

<div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-[280px_1fr] py-12">

  <!-- SIDEBAR -->
  <aside class="hidden lg:block border-r border-gray-200">

    <div class="sticky top-20 h-[calc(100vh-6rem)] overflow-y-auto pr-6">

      {% for module in course.modules.all %}
        <div class="mb-6">

          <h3 class="text-xs font-semibold text-[var(--color-secondary)] uppercase tracking-wider mb-3">
            {{ module.title }}
          </h3>

          {% for l in module.lessons.all %}
            <a href="{% url 'students:student_course_lesson' course.id l.slug %}"
               class="block px-4 py-3 rounded-xl text-sm transition-all mb-1
               {% if l == lesson %}
                 bg-[var(--color-accent)] text-white shadow-sm font-semibold
               {% else %}
                 text-gray-700 hover:bg-gray-100
               {% endif %}">
              {{ l.title }}
            </a>
          {% endfor %}

        </div>
      {% endfor %}

    </div>

  </aside>


  <!-- CONTENT -->
  <main class="px-6 lg:px-16 max-w-5xl mx-auto w-full space-y-8">

    <h1 class="text-4xl lg:text-5xl font-bold text-[var(--color-primary-dark)] leading-tight">
      {{ lesson.title }}
    </h1>

    <article class="prose prose-lg max-w-none">
      {{ lesson.content_formatted|safe }}
    </article>

    <div class="flex justify-end pt-6 border-t border-gray-100">

      <form action="{% url 'students:lesson_complete' %}" method="post">
        {% csrf_token %}
        {{ lesson_complete_form.as_p }}

        <button class="btn btn-primary">
          Наступна лекція
        </button>

      </form>

    </div>

  </main>

</div>

{% endblock %}